一.	项目概述

人工智能时代的到来，想必大家也并不陌生，人工智能对于现在互联网这个高速发展的时代而言有着重要的作用，能够给人们带来很多的便利，而人脸识别乃至说其他的识别，这是人工智能的关键的一环。因为人工智能有着这样的作用，我借助本次的大作业时期，开发了一个人脸的识别的系统，也不算是一个很大的系统，算是一个小demo，借此对人工智能有一个进一步的认识，同时也是对于学习过的技术的一种巩固，能够对于人脸进行一定的识别的操作，也可用在其他的地方，我想也是挺好的。
用户在人脸识别系统登录之后，可以进行人脸的识别与注册，可以通过摄像头或者照片进行人像的注册，然后保存到当地的数据库当中，然后可以进行库中的人物的识别，看到想要识别的人脸是否存在在数据库当中，进而完成人脸识别的操作。人脸识别的开发后端采用了Servlet、lombok、freemarker、hutool等技术，前端采用了JavaScript、ajax、layui等技术、第三方SDK是基于虹软人脸识别 SDK3.0版本，里面有很多关于人脸识别的jar包。采用SpringBoot+Mybatis+shiro的框架整合，开发出一个相对具有安全效应的人脸识别项目，使用了Mysql作为数据库，最后用Maven进行项目管理来进行人脸识别的设计与开发。



二.	系统总体结构图（或系统业务流程图）

2.1系统的总体体系结构图

                

图 2-1 系统总体结构图








2.2功能模块图



图 2-2 人脸识别登录系统流程图
       
















     	        

图 2-3 人脸识别注册流程图

            	    

图 2-4 人脸识别人脸注册流程图



图 2-5  人脸识别人脸搜索流程图


三．数据库表结构

（1）用户表 user，具体字段如下表:




（2）人脸信息表 user_face_info，具体字段如下表：












四．系统设计及开发

1、开发环境下系统的结构图

=



2、说明程序的首页是哪个，相互之间的调用关系。
程序的首页是 login.ftl，但因为是SpringBoot所启动的项目，所以在启动的时候需要自己进行url的输入才能够访问。url的设置的话需要使用RequestMapping进行路由的设置。否则是访问不到相对应的页面的。

我们先定义了两个路由和页面，这里做的是简单的人脸识别系统，所需要的的页面相对来说比较的少，我们可以先定义好所有的页面在进行慢慢的开发，这里配置了两个路由，一会在开发的时候能够达到相对应跳转的操作，使用SpringBoot进行路由的配置相对来说比javaWeb的跳转好操作许多。路由相当于指向，也就是请求的转发。我们不需要设置对应的Servlet，这正是SpringBoot这种框架的优势的地方，只需要一个@RequestMapping就可以指定路由。


在路由配置完成之后，我们进行人脸识别系统主页的开发，首先从数据库中读取到人脸识别用户的相关信息，如果数据库当中的账号密码和我们在login.ftl页面输入的账号密码一致的话，我们就可以进入下一个操作，并跳转到success.ftl页面，这里的登录做到和数据库的交互操作，如果账号密码是不一致的话，我们之后的操作都是无法进行的，这符合我们账户的思维。未登录的话，之后的操作都是不存在的。

数据库基本内容也就被读取出来，这一步是较为关键的操作。


注册的基本操就如同上图的代码所示，注册的操作不需要很多的解释，因为这个操作不是很难，只需要考虑mapper和相对应的数据库怎么实现就好了。
如果我们在数据库当中没有当前的账号，我们自然无法进入这个页面，这个时候就需要注册一个账号，账号的注册也需要储存在本地数据库当中，这里我用的不是简单的设计账号密码放入数据库，而是用了盐和md5等一系列的加密算法进行操作，在数据库中账号密码的安全性能够更高。而加密算法等技术将在下面细细道来。

这是登录页面，CSS等前端的代码我没有怎么更改，前端的设计方面我做我比较少，能够实现功能我就没有怎么去管了。
这样我们要的人脸识别系统也就具备了大致的模型，实现登录和注册。下面就是对于人脸怎么识别的操作了，这也是这个项目的关键之处。
人脸识别的关键是第三方的sdk里面的jar包，有了这些sdk我们才可能更好的进行人脸的识别，算法的核心是自己写的，但是也需要sdk的支持才能够让人脸识别系统更好的运作。我们可以选择百度或者阿里巴巴的人脸识别sdk，这里我选择的是虹软人脸识别 SDK3.0版本。


 SpringBoot配置文件的配置十分的关键，其中人脸识别引擎库，APP_ID，SDK_KEY可通过虹软官网”开发者中心“，进行 “登录”后在“我的应用“中进行获取。
我们需要对人脸引擎进行使用，需要去官网下载对应的dll文件，算法的话需要自己去编写。这里主要说明几个关键的代码。

我们首先在Controller层将基本的业务代码写好，人脸检测业务的话首先我们需要先用base64将本地输入的照片进行数据的处理，处理好后我们再根据service层的impl实现类人脸检测的实现。

其他的业务也是类似的操作，这里举一个检测人脸的例子进行业务层的说明。具体其他的实现在代码当中的注释当中，我写的也算比较完善，这里就不一一例举了。






3、系统有什么特色，运用了哪些新技术，并举例说明。

使用maven 进行项目管理

使用maven 进行项目依赖包的统一添加与管理。

使用ajax 异步技术与进行了前后端的对接
在ftl页面当中，我们时常要用到后端的数据并且输出到前端的页面当中，这样就不可避免的需要异步的操作，我们可以通过ajax的异步操作提供一节并发请求的结构，方便了很多的操作。





我们通过ajax调用后台的数据，例如调用后端UserFaceInfoController控制层当中的getUserInfo方法，在这个过程中ajax不可避免的成为桥梁的作用，还有就是通过ajax调用其他的url地址，进而达到从其他地址获取信息的作用，这也是异步技术的一部分。


使用Token进行身份的验证，判断用户的操作是否有权限。同时也有Shiro过滤器Filter的操作，md5加密算法和盐处理用户输入的密码。




我们根据过滤器和Token的双重操作，对用户进行权限的判断。比如我们在访问在访问人脸识别系统的时候的时候，想要进行人脸识别的的话，需要赋予权限才能够操作，首先需要验证通过登录，Token也要对的上，否则在访问其他的url地址的时候，将被拦截下来而转到登录的页面，也就是说使用了Shiro需要身份验证才能进入其他的页面。没有权限的是不能进入的。这也符合我们的常规设计思想，登录一定在使用系统的前面，要是可以通过地址栏的url输入而访问那登录就没有安全的意义了。

可以看到，我们用了一个加密算法md5加密算法进行用户注册时候的密码管理，我们不仅仅是是将用户的密码保存到数据库当中，我们还用了随机的盐值进行加密，这样在数据库中除了本人的话，一般是很难看到数据库当中的数据的，他是加密之后的一串数字代码，如下所示。这样就相对能够更好的保护密码，降低数据库数据的泄露。而用户的使用不会受到影响，因为我们可以通过解密进行密码的还原。



使用Spring Boot框架+Layui框架+Shiro框架，Mybatis作为数据存储层技术，Token作为用户的身份凭证，Mysql作为主流的数据库，最后进行整合。 
 Spring Boot框架继承Spring框架中的 IOC特性，将网站项目的对象之间的依赖关系都交给了Spring来进行控制。通过DI依赖注入特性，可以动态地将依赖对象注入到Bean 组件。且可管理项目繁多的组件， 极大地简化了开发步骤。而且Spring Boot框架中内嵌了Servlet容器，降低了对环境的要求。同时解决了Spring的弊端，因而使用Spring Boot框架。
Mybatis是一个用Java编写的持久层框架，它使用ORM实现了结果集的封装。ORM是Object Relational Mapping 对象关系映射。简单来说，就是把数据库表和实体类及实体类的属性对应起来，让开发者操作实体类就实现操作数据库表。它封装了JDBC操作的很多细节，使开发者只需要关注sql语句本身，而无需关注注册驱动，创建连接等烦杂过程。
Token的意思是“令牌”，是服务端生成的一串字符串，作为客户端进行请求的一个标识。在计算机身份认证中是令牌（临时）的意思，在词法分析中是标记的意思。一般作为邀请、登录系统使用。
layui，是一款采用自身模块规范编写的前端 UI 框架，遵循原生 HTML/CSS/JS 的书写与组织形式，门槛极低，拿来即用。




五．系统运行截图（部分）

开发运行环境：




主页以及登录页面：







注册页面：







人脸注册页面：



人脸搜索页面：





数据库：








